(this["webpackJsonpexperimental-blog-using-react"]=this["webpackJsonpexperimental-blog-using-react"]||[]).push([[0],{193:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(57),c=n.n(a),s=(n(161),n(51)),i=n(11),o=n(209),u=n(217),j=n(211),b=n(216),d=n(218),l=n(212),p=n(194),O=n(54),h=n(58),x=n(207),f=n(4),m=function(e){var t=e.input,n=e.meta,r=e.label;return Object(f.jsx)(l.a.Field,Object(h.a)({error:n.submitFailed&&n.error?{content:n.error,pointing:"below"}:void 0,control:x.a,label:r},t))},v=n(208),y=function(e){var t=e.input,n=e.meta,r=e.label;return Object(f.jsx)(l.a.Field,Object(h.a)({error:n.submitFailed&&n.error?{content:n.error,pointing:"below"}:void 0,control:v.a,label:r},t))},S=n(94),g=n(77),E=n(65),C=function(e){return Object(E.isNil)(e)||Object(E.isString)(e)&&""===e.trim()},w=function(e){return function(t){return C(t)?e||"Need to be entered.":void 0}},D=function(e){return function(t){return function(n){var r=Object(E.isFunction)(e)?e(t):e;return!C(n)&&Object(E.isString)(n)&&n.length>=t?r||"Need to be less than ".concat(t," characters"):void 0}}},A=function(e){return function(t){return Object.entries(e).reduce((function(e,n){var r=Object(g.a)(n,2),a=r[0],c=r[1],s=t[a];return Object(h.a)(Object(h.a)({},e),{},Object(S.a)({},a,function(e,t){var n=e.map((function(e){return e(t)})).filter((function(e){return e}));return Object(E.first)(n)}(c,s)))}),{})}},I=n(40),F=n.n(I),N=n(90),k=n(91),U=n.n(k);function L(){return(L=Object(N.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("https://retoolapi.dev/xQQK5j/posts??_sort=date&_order=asc");case 3:if(!((t=e.sent).status>299)){e.next=8;break}return e.next=7,t;case 7:throw e.sent;case 8:return e.abrupt("return",{type:"SUCCESS",data:t.data});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{type:"FAILURE",error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function K(){return(K=Object(N.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("https://retoolapi.dev/xQQK5j/posts/".concat(t));case 3:if(!((n=e.sent).status>299)){e.next=8;break}return e.next=7,n;case 7:throw e.sent;case 8:return e.abrupt("return",{type:"SUCCESS",data:n.data});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{type:"FAILURE",error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function R(){return(R=Object(N.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post("https://retoolapi.dev/xQQK5j/posts",t);case 3:if(!((n=e.sent).status>299)){e.next=8;break}return e.next=7,n;case 7:throw e.sent;case 8:return e.abrupt("return",{type:"SUCCESS",data:n.data});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{type:"FAILURE",error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function _(){return(_=Object(N.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.delete("https://retoolapi.dev/xQQK5j/posts/".concat(t));case 3:if(!((n=e.sent).status>299)){e.next=8;break}return e.next=7,n;case 7:throw e.sent;case 8:return e.abrupt("return",{type:"SUCCESS",data:n.data});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{type:"FAILURE",error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Q=function(){var e,t=Object(i.f)();return Object(f.jsx)(O.b,{onSubmit:function(e){return function(e){return R.apply(this,arguments)}(Object.assign({},e)).then((function(e){console.log({newPost:e}),"SUCCESS"===e.type&&t.push("/post/".concat(e.data.id))}))},subscription:{submitting:!0,hasValidationErrors:!0,pristine:!0},validate:A({header:[w(),D()(50)],preamble:[w(),D()(250)],body:[w()],author:[w()],email:[w(),function(t){return C(t)||!Object(E.isString)(t)||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t)?void 0:e||"The email address is not valid"}],date:[w()]}),render:function(e){var t=e.handleSubmit,n=e.form,r=e.submitting,a=e.pristine;return Object(f.jsxs)(l.a,{loading:r,onSubmit:t,children:[Object(f.jsx)(O.a,{label:"Header",name:"header",component:m}),Object(f.jsx)(O.a,{label:"Preamble",type:"text",name:"preamble",component:y}),Object(f.jsx)(O.a,{label:"Text",type:"text",name:"body",component:y}),Object(f.jsx)(O.a,{label:"Author",type:"text",name:"author",component:m}),Object(f.jsx)(O.a,{label:"Email",type:"email",name:"email",component:m}),Object(f.jsx)(O.a,{label:"Date",type:"date",name:"date",component:m}),Object(f.jsxs)(l.a.Group,{children:[Object(f.jsx)(l.a.Field,{control:p.a,type:"submit",children:"Create"}),Object(f.jsx)(p.a,{type:"button",onClick:function(){return n.reset},disabled:r||a,children:"Reset"})]})]})}})},T=function(){return Object(f.jsxs)(o.a,{children:[Object(f.jsx)(b.a,{children:"Create post"}),Object(f.jsx)(d.a,{children:Object(f.jsx)(Q,{})})]})},G=function(e){var t=Object(r.useState)({type:"NOT_ASKED"}),n=Object(g.a)(t,2),a=n[0],c=n[1],s=Object(i.g)();return Object(r.useEffect)((function(){"NOT_ASKED"===a.type&&s.id&&(c({type:"LOADING"}),function(e){return K.apply(this,arguments)}(parseInt(s.id)).then(c))}),[a.type,s.id]),e.render({postData:a})},H=n(210),P=n(215),Z=function(e){var t=e.postData,n=Object(i.f)();switch(t.type){case"NOT_ASKED":return Object(f.jsx)("p",{children:"Not asked"});case"LOADING":return Object(f.jsx)(H.a,{active:!0,inline:"centered",children:"Loading"});case"SUCCESS":return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(o.a,{text:!0,children:[Object(f.jsxs)(P.a,{children:[Object(f.jsx)(P.a.Description,{children:t.data.email}),Object(f.jsx)(P.a.Meta,{children:t.data.date}),Object(f.jsx)(P.a.Header,{children:t.data.author})]}),Object(f.jsx)(b.a,{as:"h2",children:t.data.header}),Object(f.jsx)("p",{children:t.data.body}),Object(f.jsx)(p.a,{primary:!0,onClick:function(){return function(e){return _.apply(this,arguments)}(t.data.id).then((function(){return n.push("/")}))},children:"Delete"})]})});case"FAILURE":return Object(f.jsx)("p",{children:"Failed load the post"})}},J=function(){return Object(f.jsxs)(o.a,{children:[Object(f.jsx)(b.a,{children:"Post"}),Object(f.jsx)(d.a,{children:Object(f.jsx)(G,{render:function(e){var t=e.postData;return Object(f.jsx)(Z,{postData:t})}})})]})},z=n(214),B=function(e){var t=e.postsData;switch(t.type){case"NOT_ASKED":return Object(f.jsx)("p",{children:"Not asked"});case"LOADING":return Object(f.jsx)(H.a,{active:!0,inline:"centered",children:"Loading"});case"SUCCESS":return Object(f.jsx)(z.a,{divided:!0,relaxed:!0,children:t.data.map((function(e){return Object(f.jsxs)(z.a.Item,{children:[Object(f.jsx)(z.a.Icon,{name:"github",size:"large",verticalAlign:"middle"}),Object(f.jsxs)(z.a.Content,{children:[Object(f.jsx)(z.a.Header,{exact:!0,to:"post/".concat(e.id),as:s.b,children:e.header}),Object(f.jsx)(z.a.Description,{exact:!0,to:"post/".concat(e.id),as:s.b,children:e.date})]})]},e.id)}))});case"FAILURE":return Object(f.jsx)("p",{children:"Failed load the posts"})}},M=function(e){var t=Object(r.useState)({type:"NOT_ASKED"}),n=Object(g.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){"NOT_ASKED"===a.type&&(c({type:"LOADING"}),function(){return L.apply(this,arguments)}().then(c))}),[a.type]),e.render({postsData:a})},V=function(){return Object(f.jsxs)(o.a,{children:[Object(f.jsx)(b.a,{children:"Posts"}),Object(f.jsx)(d.a,{children:Object(f.jsx)(M,{render:function(e){var t=e.postsData;return Object(f.jsx)(B,{postsData:t})}})})]})},$=n(213),q=function(){return Object(f.jsx)("nav",{children:Object(f.jsxs)($.a,{children:[Object(f.jsx)($.a.Item,{children:Object(f.jsx)(s.b,{exact:!0,to:"/",children:"Home"})}),Object(f.jsx)($.a.Item,{children:Object(f.jsx)(s.b,{exact:!0,to:"/create-post",children:"Create post"})})]})})},W=function(){return Object(f.jsx)(s.a,{children:Object(f.jsx)(o.a,{text:!0,children:Object(f.jsxs)(u.a,{children:[Object(f.jsx)(u.a.Row,{columns:1,children:Object(f.jsx)(u.a.Column,{children:Object(f.jsx)(q,{})})}),Object(f.jsx)(u.a.Row,{children:Object(f.jsx)(u.a.Column,{children:Object(f.jsx)(j.a,{})})}),Object(f.jsx)(u.a.Row,{children:Object(f.jsx)(u.a.Column,{children:Object(f.jsxs)(i.c,{children:[Object(f.jsx)(i.a,{exact:!0,path:"/",component:V}),Object(f.jsx)(i.a,{path:"/create-post",component:T}),Object(f.jsx)(i.a,{path:"/post/:id",component:J})]})})})]})})})};c.a.render(Object(f.jsx)(W,{}),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.3c3f2dac.chunk.js.map